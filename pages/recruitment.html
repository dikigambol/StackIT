<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="shortcut icon" href="../assets/img/logo.png" />

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous" />

  <!-- custom css -->
  <link rel="stylesheet" href="../assets/css/style.css" />

  <title>Pendaftaran StackIT</title>
</head>

<body>
  <div class="section-navbar">
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #006fad">
      <div class="container-fluid">
        <a class="navbar-brand" href="../index.html"><img src="../assets/img/logo.png" class="logo" alt="" />
        </a>

        <div class="community-name me-auto">
          <h1 class="fw-bold">StackIT Community</h1>
          <h6 class="fw-bold">Institut Asia Malang</h6>
        </div>
      </div>
    </nav>
  </div>

  <div class="section-content mb-5">
    <div class="container position: relative">
      <div class="row">
        <div class="col-sm-12">
          <div class="content-title text-center mt-5">
            <h2 class="fw-bold" style="color: #006fad">Form Pendaftaran</h2>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-8 offset-lg-2">
          <div class="card shadow bg-body rounded">
            <div class="card-body">
              <form id="sheetdb-form" class="
                    col-lg-6
                    offset-lg-3
                    col-sm-10
                    offset-sm-1
                    needs-validation
                  " novalidate action="https://sheetdb.io/api/v1/34006rimmdvw6">

                <div class="mb-3 mt-5">
                  <label for="name" class="form-label">Nama Lengkap</label>
                  <input type="text" class="form-control" id="name" aria-describedby="name" name="data[nama]"
                    placeholder="ex : jonatan" required />
                  <div class="invalid-feedback">Isi nama dengan benar !</div>
                  <div class="valid-feedback">Nama sudah oke !</div>
                </div>

                <div class="mb-3">
                  <label for="email" class="form-label">Alamat Email</label>
                  <input type="email" class="form-control" id="email" aria-describedby="email" name="data[email]"
                    placeholder="ex : ancientlord@email.com" required />
                  <div class="invalid-feedback">
                    Email wajib diisi !
                  </div>
                  <div class="valid-feedback">Email sudah oke !</div>
                </div>

                <div class="mb-3">
                  <label for="angkatan" class="form-label">Angkatan</label>
                  <input type="text" class="form-control" id="angkatan" name="data[angkatan]" placeholder="ex : 2020"
                    required />
                  <div class="invalid-feedback">
                    Angkatan wajib diisi !
                  </div>
                  <div class="valid-feedback">Angkatan sudah oke !</div>
                </div>

                <div class="mb-3">
                  <label for="jurusan" class="form-label">Jurusan</label>
                  <input type="text" class="form-control" id="jurusan" name="data[jurusan]" placeholder="ex : TI"
                    required />
                  <div class="invalid-feedback">
                    Jurusan wajib diisi !
                  </div>
                  <div class="valid-feedback">Jurusan sudah oke !</div>
                </div>

                <div class="mb-3">
                  <label for="phone" class="form-label">Nomor Telepon</label>
                  <input type="text" class="form-control" id="phone" aria-describedby="phone" name="data[nomor]"
                    placeholder="ex : 081xxxxxxx" required />
                  <div class="invalid-feedback">Nomor telepon wajib diisi !</div>
                  <div class="valid-feedback">Looks good!</div>
                </div>
                <div id="emailHelp" class="form-text mb-3 fw-bold" style="font-size: 13px">
                  Pastikan nomor telepon terhubung ke WhatsApp !
                </div>

                <div class="mb-3">
                  <label for="interest" class="form-label form-check-label">
                    Ketertarikan di bidang :
                  </label>
                  <br />
                  <div class="form-check radio-input d-flex">
                    <input class="align-self-center form-check-input" type="radio" name="data[interest]"
                      value="frontend" required />
                    &nbspFrontend
                    <input type="radio" class="ms-4 align-self-center form-check-input" name="data[interest]"
                      value="backend" required />
                    &nbspBackend
                    <input type="radio" class="ms-4 align-self-center form-check-input" name="data[interest]"
                      value="fullstack" required />
                    &nbspFullstack
                  </div>
                </div>
                <button id="button_submit" type="submit" class="mt-3 mb-3 btn btn-primary btn-kirim w-100 fw-bold"
                  style="background-color: #006fad">
                  SUBMIT
                </button>

                <button class="btn btn-primary btn-loading w-100 d-none" type="button" disabled>
                  <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                  Loading...
                </button>
                <div class="mb-5"></div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-1 offset-lg-9">
          <img class="image-form" src="../assets/img/regis1.png" alt="" />
        </div>
      </div>
    </div>
  </div>

  <!-- Optional JavaScript; choose one of the two! -->

  <!-- Option 1: Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
    crossorigin="anonymous"></script>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>

  <script src="recruitment.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <script>
    var form = document.getElementById('sheetdb-form');
    form.addEventListener("submit", e => {
      e.preventDefault();
      const btnKirim = document.querySelector(".btn-kirim");
      const btnLoading = document.querySelector(".btn-loading");

      btnLoading.classList.toggle("d-none");
      btnKirim.classList.toggle("d-none");

      fetch(form.action, {
        method: "POST",
        body: new FormData(document.getElementById("sheetdb-form")),
      }).then(
        response => response.json()
      ).then((html) => {
        btnLoading.classList.toggle("d-none");
        btnKirim.classList.toggle("d-none");
        sweetAlert();
      });
    });

    const sweetAlert = () => {
      Swal.fire({
        title: '<strong>Pendaftaran berhasil</strong>',
        icon: 'success',
        html: 'Klik tombol oke untuk bergabung di grup WhatsApp',
        showCancelButton: false,
        focusConfirm: false,
        confirmButtonText: '<i class="fa fa-thumbs-up"></i> Oke',
        confirmButtonAriaLabel: 'Thumbs up, great!',
      }).then(function () {
        window.location.href = "https://chat.whatsapp.com/Gacd3U1jM1V13X9hzEG9vB";
      })
    }

  </script>
</body>

</html>